import { createMotiaTester } from '@motiadev/test'

describe('POST /basic-tutorial', () => {
  let tester: ReturnType<typeof createMotiaTester>

  beforeAll(() => {
    tester = createMotiaTester() // create once per suite
  })

  afterAll(async () => {
    await tester.close() // proper teardown
  })

  it('should return 200 OK', async () => {
    const body = {
      pet: { name: 'Jack', photoUrl: 'https://images.dog.ceo/breeds/pug/n02110958_13560.jpg' },
      foodOrder: { id: 'food-order-1', quantity: 0 },
    }

    const res = await tester.post('/basic-tutorial', { body } as any)

    expect(res.status).toBe(200)
    expect(res.body.name).toBe('Jack')
  })
})
